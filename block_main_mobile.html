<div class="_customer-section _customer-order">
    <div class="_customer-section__container">
        <div class="_customer-order__title">Нужна консультация и&nbsp;помощь в&nbsp;подборе?</div>
        <div class="_customer-order__subtitle">
            Наши специалисты готовы предоставить всю&nbsp;необходимую информацию и&nbsp;ответить
            на&nbsp;ваши&nbsp;вопросы
        </div>
        <div class="_customer-order__wrapper">
            <div class="_customer-order__form">
                <div class="_customer-order__inputs">
                    <label>
                        <input class="_customer-order__input" id="_customerName" type="text" required=""
                            placeholder="Имя" />
                    </label>
                    <label>
                        <input class="_customer-order__input" id="_customerPhone" type="tel" required=""
                            placeholder="Телефон" />
                    </label>
                    <label>
                        <input class="_customer-order__input" id="_customerEmail" type="email" required=""
                            placeholder="Почта" />
                    </label>
                    <label class="_customer-order__textarea-label">
                        <textarea class="_customer-order__textarea" id="_customerMessage" placeholder="Комментарий"
                            name="comment"></textarea>
                    </label>
                </div>

                <div class="_customer-order__btns">
                    <button id="_customerFile"
                        class="_customer-order__btns-file ab-order js-apress-order-button js-get-order-form"
                        data-company-contacts-url="/contacts" data-company-name="ЭЛИТ-ЖБИ"
                        data-params='{"company_id":"99595434"}' data-type="message"
                        onclick="yaCounter45589971.reachGoal('megasite_mobile_write_us'); return true;">
                        <img src="/system/ckeditor_assets/pictures/459066/content_upload-icon.png" alt="" />
                        Прикрепить файл
                    </button>
                    <button id="_customerSubmit"
                        class="ab-order js-apress-order-button js-get-order-form _customer-order__btns-submit"
                        data-company-contacts-url="/contacts" data-company-name="ЭЛИТ-ЖБИ"
                        data-params='{"company_id":"99595434"}' data-type="message"
                        onclick="yaCounter45589971.reachGoal('megasite_mobile_write_us'); return true;">
                        Отправить
                    </button>
                </div>

                <div class="_customer-order__info">
                    Нажимая "Отправить", вы&nbsp;даете согласие на&nbsp;обработку персональных
                    данных в&nbsp;соответствии с&nbsp;<a href="/confidential" target="_blank">политикой
                        конфиденциальности</a> и&nbsp;принимаете условия <a href="/terms"
                        target="_blank">пользовательского соглашения.</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="_customer-section _customer-skills _customer-adv">
    <div class="swiper-pagination"></div>
    <div class="_customer-section__container">
        <div class="_customer-skills__title">Наши Преимущества</div>
        <div class="swiper-container">
            <div class="_customer-skills__items swiper-wrapper">
                <div class="swiper-slide">
                    <div class="_customer-skills__item">
                        <img src="/system/ckeditor_assets/pictures/459061/content_s1.png" alt=""
                            class="_customer-skills__icon" />
                        <div class="_customer-skills__descr">
                            Собственное
                            производство
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="_customer-skills__item">
                        <img src="/system/ckeditor_assets/pictures/459062/content_s2.png" alt=""
                            class="_customer-skills__icon" />
                        <div class="_customer-skills__descr">
                            Широкий
                            ассортимент
                            продукции
                            под&nbsp;любые задачи
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="_customer-skills__item">
                        <img src="/system/ckeditor_assets/pictures/459063/content_s3.png" alt=""
                            class="_customer-skills__icon" />
                        <div class="_customer-skills__descr">
                            Сертификация
                            и&nbsp;экспертиза ОТК
                            выпускаемой
                            продукции
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="_customer-skills__item">
                        <img src="/system/ckeditor_assets/pictures/459065/content_s4.png" alt=""
                            class="_customer-skills__icon" />
                        <div class="_customer-skills__descr">
                            Собственный
                            автопарк
                            для доставки
                            до&nbsp;объекта
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="_customer-section _customer-about">
    <div class="_customer-section__container">
        <div class="_customer-about__wrapper">
            <div class="_customer-about__content">
                <div class="_customer-about__title">О компании</div>
                <div class="_customer-about__subtitle">ООО "ЭЛИТ-ЖБИ"&nbsp;— всегда на&nbsp;шаг&nbsp;впереди!</div>
                <div class="_customer-about__text">
                    Благодаря четко налаженному автоматизированному производству, ориентации на&nbsp;требования
                    современного строительства, непрерывному совершенствованию технологических процессов и&nbsp;команде
                    опытных специалистов, нашей компании удается успешно достичь своей&nbsp;основной цели&nbsp;–
                    обеспечить своих&nbsp;соотечественников прочными, долговечными и&nbsp;недорогими конструкциями!
                </div>
                <a href="/about" class="_customer-about__btn"
                    onclick="yaCounter45589971.reachGoal('megasite_mobile_link_about'); return true;">
                    Подробнее
                    <img src="/system/ckeditor_assets/pictures/459037/content_about-icon.png" alt="" />
                </a>
            </div>
        </div>
    </div>
</div>
<div class="_customer-section _customer-projects">
    <div class="swiper-pagination"></div>
    <div class="_customer-section__container">
        <div class="_customer-projects__title">Процесс работы, отгрузка материалов</div>
        <div class="swiper-container">
            <div class="_customer-projects__items swiper-wrapper">
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459043/content_p1.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459044/content_p1b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459045/content_p2.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459052/content_p2b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459046/content_p3.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459053/content_p3b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459047/content_p4.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459054/content_p4b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459048/content_p5.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459056/content_p5b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459049/content_p6.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459058/content_p6b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459050/content_p7.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459059/content_p7b.png" />
                </div>
                <div class="_customer-projects__item swiper-slide">
                    <img src="/system/ckeditor_assets/pictures/459051/content_p8.png" alt=""
                        data-original="/system/ckeditor_assets/pictures/459060/content_p8b.png" />
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/assets/custom_assets/swiper.min_5.3.1.js"></script>
<script src="/assets/custom_assets/imask.js"></script>
<script async>
    const sliderAdv = new Swiper("._customer-adv .swiper-container", {
        slidesPerView: 1,
        loop: true,
        pagination: {
            el: "._customer-adv .swiper-pagination",
            dinamicBullets: true,
            clickable: true,
        },
        autoplay: {
            delay: 6000,
        },
        speed: 900,
    });
    const sliderProjects = new Swiper("._customer-projects .swiper-container", {
        slidesPerView: 1,
        loop: true,
        pagination: {
            el: "._customer-projects .swiper-pagination",
            dinamicBullets: true,
            clickable: true,
        },
        autoplay: {
            delay: 6000,
        },
        speed: 900,
    });
    const sliderMain = new Swiper("._customer-cib__slider .swiper-container", {
        slidesPerView: 1,
        loop: true,
        grabCursor: true,
        keyboard: {
            enabled: true,
        },
        pagination: {
            el: "._customer-cib .swiper-pagination",
            dinamicBullets: true,
            clickable: true,
        },
        autoplay: {
            delay: 6000,
        },
        speed: 900,
        navigation: {
            prevEl: "._customer-cib__prev",
            nextEl: "._customer-cib__next",
        },
    });
    document.addEventListener("DOMContentLoaded", function () {
        const groupsBlock = document.querySelector(".company-product-groups__wrapper");
        if (groupsBlock) {
            groupsBlock.insertAdjacentHTML(
                "afterend",
                `<a href="/catalog" class="_customer-add__catalog-more-btn"onclick="yaCounter45589971.reachGoal('megasite_mobile_link_catalog'); return true;">
                    <span>Смотреть все<img src="/system/ckeditor_assets/pictures/459114/content_more-icon.png"/></span>
                </a>`);
        }

        const goodsBlock = document.querySelector(".offers");
        if (goodsBlock) {
            goodsBlock.insertAdjacentHTML(
                "afterend",
                `<div class="_customer-add__catalog-more-btn-box"><a href="/catalog" class="_customer-add__catalog-more-btn"onclick="yaCounter45589971.reachGoal('megasite_mobile_link_catalog'); return true;">
                    <span>Смотреть все<img src="/system/ckeditor_assets/pictures/459114/content_more-icon.png"/></span>
                </a></div>`);
        }   /*order*/
        function setImask(id) {
            let element = document.getElementById(id);
            let maskOptions = {
                mask: "+7 (000) 000-00-00",
                lazy: false,
            };
            let mask = new IMask(element, maskOptions);
        }

        setImask("_customerPhone");

        const _customerInputs = document.querySelectorAll("._customer-order__input:required");

        setInterval(function () {
            _customerInputs.forEach((item) => {
                if (item.value === "" || item.value == "+7 (___) ___-__-__") {
                    item.style.borderColor = "#ff6e58";
                }

                if (item.value && item.value !== "+7 (___) ___-__-__") {
                    item.style.borderColor = "#d5f1ff";
                }
            });
        }, 1000);

        const _customerSubmitButton = document.querySelector("#_customerSubmit"),
            _customerFileButton = document.querySelector("#_customerFile");
        _customerSubmitButton.disabled = true;
        _customerFileButton.disabled = true;
        let _customerFinalMessage = "";
        function _customerSendForm() {
            if (_customerSubmitButton.disabled !== true) {
                _customerFinalMessage = `Добрый день!\nМеня зовут ${document.querySelector("#_customerName").value}\n${document.querySelector("#_customerMessage").value
                    }`;
            }
        }
        function formValidate() {
            _customerSubmitButton.disabled =
                [...document.querySelectorAll("._customer-order__input:required")].filter(
                    (element) => element.value === "" || element.value === 0
                ).length !== 0
                    ? true
                    : false;
            _customerFileButton.disabled = _customerSubmitButton.disabled == true ? true : false;
        }
        document.querySelectorAll("._customer-order__input:required").forEach((element) => {
            element.addEventListener("change", () => {
                formValidate();
            });
            element.addEventListener("mouseout", () => {
                formValidate();
            });
        });
        function openWidget() {
            _customerSendForm();
            setTimeout(() => {
                document.querySelector("#order_messages_attributes_0_text").value = _customerFinalMessage;
                document.querySelector(".js-order-customer-phone-field") === null
                    ? (document.querySelector("#order_messages_attributes_0_text").value +=
                        "\n" + "Телефон: " + document.querySelector("#_customerPhone").value)
                    : (document.querySelector(".js-order-customer-phone-field").value =
                        document.querySelector("#_customerPhone").value);
                document.querySelector(".js-input-email-auth") === null
                    ? (document.querySelector("#order_messages_attributes_0_text").value +=
                        "\n" + "Почта: " + document.querySelector("#_customerEmail").value)
                    : (document.querySelector(".js-input-email-auth").value =
                        document.querySelector("#_customerEmail").value);
            }, 1000);
        }
        _customerSubmitButton.addEventListener("click", function (event) {
            openWidget();
        });
        _customerFileButton.addEventListener("click", function (e) {
            openWidget();
            setTimeout(() => {
                document.getElementById("order_").click();
            }, 1000);
        });

        /*popup*/
        const overlay = document.querySelector("._customer-pop-up__overlay");
        const closeBtn = document.querySelector("._customer-pop-up__button_close");

        if (typeof popUp === "undefined") {
            var popUp = [];
        }
        popUp = document.querySelectorAll("._customer-pop-up");

        function popOpen(customId) {
            let siteBody = document.querySelector("body");
            siteBody.classList.add("_customer-stop-scroll");

            for (let i = 0; i < popUp.length; i++) {
                if (popUp[i].id == customId) {
                    popUp[i].classList.add("_customer-pop-up_active");
                }
            }
        }

        function popClose() {
            let siteBody = document.querySelector("body");
            siteBody.classList.remove("_customer-stop-scroll");
            for (let i = 0; i < popUp.length; i++) popUp[i].classList.remove("_customer-pop-up_active");
        }

        const galleryList = document.querySelector("._customer-projects"),
            galleryImage = document.querySelectorAll("._customer-projects__item"),
            galleryPopUp = document.getElementById("_customer-gallery__pop-up"),
            galleryPopUpPrev = galleryPopUp.querySelector("._customer-pop-up__button_prev"),
            galleryPopUpNext = galleryPopUp.querySelector("._customer-pop-up__button_next"),
            galleryPopUpContent = galleryPopUp.querySelector("._customer-pop-up__content img");
        let galleryImageCurrent = 0;

        function showImage() {
            galleryPopUpContent.setAttribute(
                "src",
                galleryImage[galleryImageCurrent].querySelector("img").getAttribute("data-original")
            );
        }

        galleryList.onclick = function (e) {
            let array = [];
            for (let i = 0; i < galleryImage.length; i++) {
                array.push(galleryImage[i]);
            }

            if (e.target.classList.contains("_customer-projects__item")) {
                galleryImageCurrent = array.indexOf(e.target);

                console.log(galleryImageCurrent);
                showImage();
                popOpen("_customer-gallery__pop-up");
            }
        };

        galleryPopUpPrev.addEventListener("click", function () {
            if (galleryImageCurrent == 0) {
                galleryImageCurrent = galleryImage.length - 1;
            } else {
                galleryImageCurrent = (galleryImageCurrent - 1) % galleryImage.length;
            }
            showImage();
        });

        galleryPopUpNext.addEventListener("click", function () {
            galleryImageCurrent = (galleryImageCurrent + 1) % galleryImage.length;
            showImage();
        });

        overlay.addEventListener("click", () => {
            popClose();
        });

        closeBtn.addEventListener("click", () => {
            popClose();
        });
    });
</script>